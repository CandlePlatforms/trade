{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Desktop/webapp-v2-feature-gtm_events/src/components/searchableTokenList/SearchableTokenList.tsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { InputField } from 'components/inputField/InputField';\nimport { useAppSelector } from 'redux/index';\nimport { userPreferredListIds$ } from 'services/observables/tokens';\nimport { Modal } from 'components/modal/Modal';\nimport { ModalFullscreen } from 'components/modalFullscreen/ModalFullscreen';\nimport { Switch } from '@headlessui/react';\nimport { prettifyNumber } from 'utils/helperFunctions';\nimport { wait } from 'utils/pureFunctions';\nimport { Image } from 'components/image/Image';\nimport { ReactComponent as IconEdit } from \"@svgr/webpack?-svgo,+titleProp,+ref!assets/icons/edit.svg\";\nimport { ReactComponent as IconTimes } from \"@svgr/webpack?-svgo,+titleProp,+ref!assets/icons/times.svg\";\nimport { getTokenListLS, setTokenListLS } from 'utils/localStorage';\nimport { isMobile } from 'react-device-detect';\nimport { SuggestedTokens } from './SuggestedTokens';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SearchableTokenListLayout = _ref => {\n  let {\n    manage,\n    setManage,\n    onClose,\n    isOpen,\n    children\n  } = _ref;\n\n  if (isMobile) {\n    return /*#__PURE__*/_jsxDEV(ModalFullscreen, {\n      title: manage ? 'Manage' : 'Select a Token',\n      setIsOpen: () => {\n        if (manage) return setManage(false);\n        onClose();\n      },\n      isOpen: isOpen,\n      showHeader: true,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    title: manage ? 'Manage' : 'Select a Token',\n    isOpen: isOpen,\n    setIsOpen: onClose,\n    showBackButton: manage,\n    onBackClick: () => setManage(false),\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_c = SearchableTokenListLayout;\nconst suggestedTokens = ['BNT', 'ETH', 'WBTC', 'USDC', 'USDT'];\nexport const SearchableTokenList = _ref2 => {\n  _s();\n\n  let {\n    onClick,\n    isOpen,\n    setIsOpen,\n    excludedTokens = [],\n    includedTokens = [],\n    tokens,\n    limit\n  } = _ref2;\n  const [search, setSearch] = useState('');\n  const [manage, setManage] = useState(false);\n  const [userPreferredListIds, setUserLists] = useState(getTokenListLS());\n  const tokensLists = useAppSelector(state => state.bancor.tokenLists);\n\n  const onClose = async () => {\n    setIsOpen(false);\n    await wait(500);\n    setManage(false);\n    setSearch('');\n  };\n\n  const handleTokenlistClick = listId => {\n    const alreadyPreferred = userPreferredListIds.includes(listId);\n    const newUserPreferredListIds = alreadyPreferred ? userPreferredListIds.filter(list => list !== listId) : [...userPreferredListIds, listId];\n    if (newUserPreferredListIds.length === 0) return;\n    setTokenListLS(newUserPreferredListIds);\n    setUserLists(newUserPreferredListIds);\n    userPreferredListIds$.next(newUserPreferredListIds);\n  };\n\n  const tokenName = name => {\n    if (name.length < 19) return name;\n    return name + '...';\n  };\n\n  return /*#__PURE__*/_jsxDEV(SearchableTokenListLayout, {\n    manage: manage,\n    onClose: onClose,\n    isOpen: isOpen,\n    setManage: setManage,\n    children: manage ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-full md:max-h-[calc(70vh-100px)] overflow-auto mb-20\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-10 px-20 space-y-15\",\n        children: tokensLists.map(tokenList => {\n          const isSelected = userPreferredListIds.some(listId => tokenList.name === listId);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex justify-between items-center border-2 border-grey-2 dark:border-grey-4 rounded px-15 py-6 ${isSelected ? 'border-primary dark:border-primary-light' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Image, {\n                alt: \"TokenList\",\n                src: tokenList.logoURI,\n                className: \"bg-grey-2 rounded-full h-28 w-28\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: 'ml-15',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: 'text-16',\n                  children: tokenList.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: 'text-12 text-grey-3',\n                  children: [tokenList.tokens.length, \" Tokens\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Switch, {\n                checked: isSelected,\n                onChange: () => handleTokenlistClick(tokenList.name),\n                className: `${isSelected ? 'bg-primary border-primary' : 'bg-grey-3 border-grey-3'} relative inline-flex flex-shrink-0 h-[20px] w-[40px] border-2 rounded-full cursor-pointer transition-colors ease-in-out duration-300`,\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\",\n                  className: `${isSelected ? 'translate-x-[20px]' : 'translate-x-0'} pointer-events-none inline-block h-[16px] w-[16px] rounded-full bg-white transform transition ease-in-out duration-300`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 19\n            }, this)]\n          }, tokenList.name, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-10 px-20 relative\",\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          input: search,\n          setInput: setSearch,\n          dataCy: \"searchToken\",\n          placeholder: \"Search name\",\n          borderGrey: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), search && /*#__PURE__*/_jsxDEV(IconTimes, {\n          className: \"w-12 absolute top-0 right-[36px]\",\n          onClick: () => setSearch('')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-cy\": \"searchableTokensList\",\n        className: \"h-[calc(70vh-50px)] md:h-[calc(70vh-206px)] overflow-auto px-10 pb-10\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pb-12\",\n          children: /*#__PURE__*/_jsxDEV(SuggestedTokens, {\n            allTokens: tokens,\n            suggestedTokens: suggestedTokens,\n            onClick: token => {\n              onClick(token);\n              onClose();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"border-grey-2 dark:border-blue-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), tokens.filter(token => (includedTokens.length === 0 || includedTokens.includes(token.address)) && !excludedTokens.includes(token.address) && (token.symbol.toLowerCase().includes(search.toLowerCase()) || token.name.toLowerCase().includes(search.toLowerCase()))).slice(0, limit ? 300 : tokens.length).map(token => {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              onClick(token);\n              onClose();\n            },\n            className: \"flex items-center justify-between rounded focus:outline-none focus:ring-2 focus:ring-primary w-full px-14 py-5 my-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(Image, {\n                src: token.logoURI,\n                alt: `${token.symbol} Token`,\n                className: \"bg-grey-2 rounded-full h-28 w-28\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid justify-items-start ml-15\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-16\",\n                  children: token.symbol\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-12 text-grey-3\",\n                  children: tokenName(token.name)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 238,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: token.balance && prettifyNumber(token.balance)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 21\n            }, this)]\n          }, token.address, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 19\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"border-grey-2 dark:border-blue-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center h-[59px] my-5\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setUserLists(getTokenListLS());\n            setManage(true);\n          },\n          className: \"text-primary font-semibold\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex justify-center items center\",\n            children: [/*#__PURE__*/_jsxDEV(IconEdit, {\n              className: \"w-[18px] h-[18px] mr-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), \"Manage Token Lists\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-grey-3 text-12 font-medium\",\n            children: \"Only supported tokens will be displayed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SearchableTokenList, \"JKDm8l3/uhKg3fCDHKbZ8J4EtKE=\", false, function () {\n  return [useAppSelector];\n});\n\n_c2 = SearchableTokenList;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SearchableTokenListLayout\");\n$RefreshReg$(_c2, \"SearchableTokenList\");","map":{"version":3,"sources":["/Users/safahi/Desktop/webapp-v2-feature-gtm_events/src/components/searchableTokenList/SearchableTokenList.tsx"],"names":["useState","InputField","useAppSelector","userPreferredListIds$","Modal","ModalFullscreen","Switch","prettifyNumber","wait","Image","getTokenListLS","setTokenListLS","isMobile","SuggestedTokens","SearchableTokenListLayout","manage","setManage","onClose","isOpen","children","suggestedTokens","SearchableTokenList","onClick","setIsOpen","excludedTokens","includedTokens","tokens","limit","search","setSearch","userPreferredListIds","setUserLists","tokensLists","state","bancor","tokenLists","handleTokenlistClick","listId","alreadyPreferred","includes","newUserPreferredListIds","filter","list","length","next","tokenName","name","map","tokenList","isSelected","some","logoURI","token","address","symbol","toLowerCase","slice","balance"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { InputField } from 'components/inputField/InputField';\nimport { useAppSelector } from 'redux/index';\nimport {\n  TokenList,\n  Token,\n  userPreferredListIds$,\n} from 'services/observables/tokens';\nimport { Modal } from 'components/modal/Modal';\nimport { ModalFullscreen } from 'components/modalFullscreen/ModalFullscreen';\nimport { Switch } from '@headlessui/react';\nimport { prettifyNumber } from 'utils/helperFunctions';\nimport { wait } from 'utils/pureFunctions';\nimport { Image } from 'components/image/Image';\nimport { ReactComponent as IconEdit } from 'assets/icons/edit.svg';\nimport { ReactComponent as IconTimes } from 'assets/icons/times.svg';\nimport { getTokenListLS, setTokenListLS } from 'utils/localStorage';\nimport { isMobile } from 'react-device-detect';\nimport { SuggestedTokens } from './SuggestedTokens';\n\ninterface SearchableTokenListProps {\n  onClick: Function;\n  isOpen: boolean;\n  setIsOpen: Function;\n  excludedTokens: string[];\n  includedTokens: string[];\n  tokens: Token[];\n  limit?: boolean;\n}\n\ninterface SearchableTokenListLayoutProps {\n  manage: boolean;\n  setManage: Function;\n  isOpen: boolean;\n  onClose: Function;\n  children: JSX.Element;\n}\n\nconst SearchableTokenListLayout = ({\n  manage,\n  setManage,\n  onClose,\n  isOpen,\n  children,\n}: SearchableTokenListLayoutProps) => {\n  if (isMobile) {\n    return (\n      <ModalFullscreen\n        title={manage ? 'Manage' : 'Select a Token'}\n        setIsOpen={() => {\n          if (manage) return setManage(false);\n          onClose();\n        }}\n        isOpen={isOpen}\n        showHeader\n      >\n        {children}\n      </ModalFullscreen>\n    );\n  }\n\n  return (\n    <Modal\n      title={manage ? 'Manage' : 'Select a Token'}\n      isOpen={isOpen}\n      setIsOpen={onClose}\n      showBackButton={manage}\n      onBackClick={() => setManage(false)}\n    >\n      {children}\n    </Modal>\n  );\n};\n\nconst suggestedTokens = ['BNT', 'ETH', 'WBTC', 'USDC', 'USDT'];\n\nexport const SearchableTokenList = ({\n  onClick,\n  isOpen,\n  setIsOpen,\n  excludedTokens = [],\n  includedTokens = [],\n  tokens,\n  limit,\n}: SearchableTokenListProps) => {\n  const [search, setSearch] = useState('');\n  const [manage, setManage] = useState(false);\n  const [userPreferredListIds, setUserLists] = useState(getTokenListLS());\n\n  const tokensLists = useAppSelector<TokenList[]>(\n    (state) => state.bancor.tokenLists\n  );\n\n  const onClose = async () => {\n    setIsOpen(false);\n    await wait(500);\n    setManage(false);\n    setSearch('');\n  };\n\n  const handleTokenlistClick = (listId: string) => {\n    const alreadyPreferred = userPreferredListIds.includes(listId);\n\n    const newUserPreferredListIds = alreadyPreferred\n      ? userPreferredListIds.filter((list) => list !== listId)\n      : [...userPreferredListIds, listId];\n\n    if (newUserPreferredListIds.length === 0) return;\n\n    setTokenListLS(newUserPreferredListIds);\n    setUserLists(newUserPreferredListIds);\n    userPreferredListIds$.next(newUserPreferredListIds);\n  };\n\n  const tokenName = (name: string) => {\n    if (name.length < 19) return name;\n    return name + '...';\n  };\n\n  return (\n    <SearchableTokenListLayout\n      manage={manage}\n      onClose={onClose}\n      isOpen={isOpen}\n      setManage={setManage}\n    >\n      {manage ? (\n        <div className=\"h-full md:max-h-[calc(70vh-100px)] overflow-auto mb-20\">\n          <div className=\"pt-10 px-20 space-y-15\">\n            {tokensLists.map((tokenList) => {\n              const isSelected = userPreferredListIds.some(\n                (listId) => tokenList.name === listId\n              );\n              return (\n                <div\n                  className={`flex justify-between items-center border-2 border-grey-2 dark:border-grey-4 rounded px-15 py-6 ${\n                    isSelected ? 'border-primary dark:border-primary-light' : ''\n                  }`}\n                  key={tokenList.name}\n                >\n                  <div className=\"flex items-center\">\n                    <Image\n                      alt=\"TokenList\"\n                      src={tokenList.logoURI}\n                      className=\"bg-grey-2 rounded-full h-28 w-28\"\n                    />\n                    <div className={'ml-15'}>\n                      <div className={'text-16'}>{tokenList.name}</div>\n                      <div className={'text-12 text-grey-3'}>\n                        {tokenList.tokens.length} Tokens\n                      </div>\n                    </div>\n                  </div>\n                  <div>\n                    <Switch\n                      checked={isSelected}\n                      onChange={() => handleTokenlistClick(tokenList.name)}\n                      className={`${\n                        isSelected\n                          ? 'bg-primary border-primary'\n                          : 'bg-grey-3 border-grey-3'\n                      } relative inline-flex flex-shrink-0 h-[20px] w-[40px] border-2 rounded-full cursor-pointer transition-colors ease-in-out duration-300`}\n                    >\n                      <span\n                        aria-hidden=\"true\"\n                        className={`${\n                          isSelected ? 'translate-x-[20px]' : 'translate-x-0'\n                        } pointer-events-none inline-block h-[16px] w-[16px] rounded-full bg-white transform transition ease-in-out duration-300`}\n                      />\n                    </Switch>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      ) : (\n        <>\n          <div className=\"mb-10 px-20 relative\">\n            <InputField\n              input={search}\n              setInput={setSearch}\n              dataCy=\"searchToken\"\n              placeholder=\"Search name\"\n              borderGrey\n            />\n            {search && (\n              <IconTimes\n                className=\"w-12 absolute top-0 right-[36px]\"\n                onClick={() => setSearch('')}\n              />\n            )}\n          </div>\n          <div\n            data-cy=\"searchableTokensList\"\n            className=\"h-[calc(70vh-50px)] md:h-[calc(70vh-206px)] overflow-auto px-10 pb-10\"\n          >\n            <div className=\"pb-12\">\n              <SuggestedTokens\n                allTokens={tokens}\n                suggestedTokens={suggestedTokens}\n                onClick={(token) => {\n                  onClick(token);\n                  onClose();\n                }}\n              />\n            </div>\n            <hr className=\"border-grey-2 dark:border-blue-1\" />\n\n            {tokens\n              .filter(\n                (token) =>\n                  (includedTokens.length === 0 ||\n                    includedTokens.includes(token.address)) &&\n                  !excludedTokens.includes(token.address) &&\n                  (token.symbol.toLowerCase().includes(search.toLowerCase()) ||\n                    token.name.toLowerCase().includes(search.toLowerCase()))\n              )\n              .slice(0, limit ? 300 : tokens.length)\n              .map((token) => {\n                return (\n                  <button\n                    key={token.address}\n                    onClick={() => {\n                      onClick(token);\n                      onClose();\n                    }}\n                    className=\"flex items-center justify-between rounded focus:outline-none focus:ring-2 focus:ring-primary w-full px-14 py-5 my-5\"\n                  >\n                    <div className=\"flex items-center\">\n                      <Image\n                        src={token.logoURI}\n                        alt={`${token.symbol} Token`}\n                        className=\"bg-grey-2 rounded-full h-28 w-28\"\n                      />\n                      <div className=\"grid justify-items-start ml-15\">\n                        <div className=\"text-16\">{token.symbol}</div>\n                        <div className=\"text-12 text-grey-3\">\n                          {tokenName(token.name)}\n                        </div>\n                      </div>\n                    </div>\n                    <div>{token.balance && prettifyNumber(token.balance)}</div>\n                  </button>\n                );\n              })}\n          </div>\n          <hr className=\"border-grey-2 dark:border-blue-1\" />\n          <div className=\"flex justify-center items-center h-[59px] my-5\">\n            <button\n              onClick={() => {\n                setUserLists(getTokenListLS());\n                setManage(true);\n              }}\n              className=\"text-primary font-semibold\"\n            >\n              <span className=\"flex justify-center items center\">\n                <IconEdit className=\"w-[18px] h-[18px] mr-4\" />\n                Manage Token Lists\n              </span>\n              <span className=\"text-grey-3 text-12 font-medium\">\n                Only supported tokens will be displayed\n              </span>\n            </button>\n          </div>\n        </>\n      )}\n    </SearchableTokenListLayout>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}