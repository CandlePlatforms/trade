{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Desktop/webapp-v2-feature-gtm_events/src/elements/swapLimit/SwapLimitTable.tsx\",\n    _s = $RefreshSig$();\n\nimport { ReactComponent as IconTimes } from \"@svgr/webpack?-svgo,+titleProp,+ref!assets/icons/times.svg\";\nimport { withdrawWeth } from 'services/web3/swap/limit';\nimport { useInterval } from 'hooks/useInterval';\nimport { cancelOrders, getOrders } from 'services/api/keeperDao';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { addNotification } from 'redux/notification/notification';\nimport { useAppSelector } from 'redux/index';\nimport { wethToken } from 'services/web3/config';\nimport { prettifyNumber } from 'utils/helperFunctions';\nimport { Image } from 'components/image/Image';\nimport { SearchInput } from 'components/searchInput/SearchInput';\nimport { DataTable } from 'components/table/DataTable';\nimport dayjs from 'dayjs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const useSwapLimitTable = () => {\n  _s();\n\n  const account = useAppSelector(state => state.user.account);\n  const [orders, setOrders] = useState([]);\n  const [weth, setWeth] = useState();\n  const [search, setSearch] = useState('');\n  const dispatch = useDispatch();\n  const tokens = useAppSelector(state => state.bancor.tokens);\n  const refreshOrders = useCallback(async () => {\n    if (account) setOrders(await getOrders(account));\n  }, [account]);\n  useEffect(() => {\n    const weth = tokens.find(x => x.address === wethToken);\n    if (weth) setWeth(weth);\n  }, [tokens]);\n  useInterval(() => {\n    refreshOrders();\n  }, 60000);\n  useEffect(() => {\n    refreshOrders();\n  }, [refreshOrders]);\n  const defaultSort = {\n    id: 'expiration',\n    desc: true\n  };\n  const data = useMemo(() => {\n    return orders.filter(t => t.getToken.symbol.toLowerCase().includes(search.toLowerCase()) || t.payToken.symbol.toLowerCase().includes(search.toLowerCase()));\n  }, [orders, search]);\n  const handleWithdrawWeth = useCallback(async () => {\n    weth && weth.balance && dispatch(addNotification(await withdrawWeth(weth.balance)));\n  }, [dispatch, weth]);\n  const handleCancelOrders = useCallback(async () => {\n    dispatch(addNotification(await cancelOrders(orders.map(x => x.orderRes))));\n  }, [dispatch, orders]);\n  const columns = useMemo(() => [{\n    id: 'expiration',\n    Header: 'Expiration',\n    accessor: 'expiration',\n    Cell: expiration => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-primary mr-12\",\n        children: dayjs.unix(expiration.value).format('DD/MM/YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: dayjs.unix(expiration.value).format('h:mm:ss A')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true),\n    minWidth: 240,\n    sortDescFirst: true\n  }, {\n    id: 'payAmount',\n    Header: 'You pay',\n    accessor: 'payAmount',\n    Cell: payAmount => {\n      const payToken = payAmount.row.original.payToken;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'flex items-center',\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          src: payToken.logoURI,\n          alt: \"Token\",\n          className: \"bg-grey-2 rounded-full h-28 w-28 mr-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }, this), `${payToken.symbol} ${payAmount.value}`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this);\n    },\n    minWidth: 200,\n    sortDescFirst: true\n  }, {\n    id: 'getAmount',\n    Header: 'You get',\n    accessor: 'getAmount',\n    Cell: getAmount => {\n      const getToken = getAmount.row.original.getToken;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: 'flex items-center',\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          src: getToken.logoURI,\n          alt: \"Token\",\n          className: \"bg-grey-2 rounded-full h-28 w-28 mr-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this), `${getToken.symbol} ${getAmount.value}`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this);\n    },\n    minWidth: 200,\n    sortDescFirst: true\n  }, {\n    id: 'rate',\n    Header: 'Rate',\n    accessor: 'rate',\n    Cell: rate => rate.value,\n    minWidth: 200,\n    sortDescFirst: true\n  }, {\n    id: 'filled',\n    Header: 'Filled',\n    accessor: 'filled',\n    Cell: filled => {\n      var _filled$value;\n\n      return prettifyNumber((_filled$value = filled.value) !== null && _filled$value !== void 0 ? _filled$value : 0) + '%';\n    },\n    minWidth: 70,\n    sortDescFirst: true\n  }, {\n    id: 'actions',\n    Header: '',\n    accessor: 'hash',\n    Cell: cellData => {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: 'hover:text-error py-5 pl-5 transition duration-200',\n        onClick: async () => dispatch(addNotification(await cancelOrders([cellData.row.original.orderRes]))),\n        children: /*#__PURE__*/_jsxDEV(IconTimes, {\n          className: 'w-10'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }, this);\n    },\n    width: 50,\n    minWidth: 50,\n    disableSortBy: true\n  }], [dispatch]);\n  if (!account || orders.length === 0) return [null, refreshOrders];\n  return [/*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"content-section pt-20 pb-10 mt-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-20 mx-[20px] md:mx-[44px]\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Active Orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-10\",\n        children: [/*#__PURE__*/_jsxDEV(SearchInput, {\n          value: search,\n          setValue: setSearch,\n          className: \"max-w-[160px] rounded-10 h-[35px]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn-outline-secondary btn-sm rounded-10',\n          onClick: () => handleCancelOrders(),\n          children: \"Cancel All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), weth && weth.balance && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: 'btn-outline-secondary btn-sm rounded-10',\n          onClick: () => handleWithdrawWeth(),\n          children: [\"Withdraw \", prettifyNumber(weth.balance), \" WETH\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DataTable, {\n      data: data,\n      columns: columns,\n      defaultSort: defaultSort,\n      isLoading: !tokens.length,\n      stickyColumn: true,\n      search: search\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 171,\n    columnNumber: 5\n  }, this), refreshOrders];\n};\n\n_s(useSwapLimitTable, \"c39okAMpB3jBIY3JkAfmRkQCbJM=\", false, function () {\n  return [useAppSelector, useDispatch, useAppSelector, useInterval];\n});","map":{"version":3,"sources":["/Users/safahi/Desktop/webapp-v2-feature-gtm_events/src/elements/swapLimit/SwapLimitTable.tsx"],"names":["withdrawWeth","useInterval","cancelOrders","getOrders","useCallback","useEffect","useMemo","useState","useDispatch","addNotification","useAppSelector","wethToken","prettifyNumber","Image","SearchInput","DataTable","dayjs","useSwapLimitTable","account","state","user","orders","setOrders","weth","setWeth","search","setSearch","dispatch","tokens","bancor","refreshOrders","find","x","address","defaultSort","id","desc","data","filter","t","getToken","symbol","toLowerCase","includes","payToken","handleWithdrawWeth","balance","handleCancelOrders","map","orderRes","columns","Header","accessor","Cell","expiration","unix","value","format","minWidth","sortDescFirst","payAmount","row","original","logoURI","getAmount","rate","filled","cellData","width","disableSortBy","length"],"mappings":"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","sourcesContent":["import { ReactComponent as IconTimes } from 'assets/icons/times.svg';\nimport { withdrawWeth } from 'services/web3/swap/limit';\nimport { useInterval } from 'hooks/useInterval';\nimport { cancelOrders, getOrders, LimitOrder } from 'services/api/keeperDao';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Token } from 'services/observables/tokens';\nimport { useDispatch } from 'react-redux';\nimport { addNotification } from 'redux/notification/notification';\nimport { useAppSelector } from 'redux/index';\nimport { wethToken } from 'services/web3/config';\nimport { prettifyNumber } from 'utils/helperFunctions';\nimport { Image } from 'components/image/Image';\nimport { SearchInput } from 'components/searchInput/SearchInput';\nimport { DataTable, TableColumn } from 'components/table/DataTable';\nimport { SortingRule } from 'react-table';\nimport dayjs from 'dayjs';\n\nexport const useSwapLimitTable = (): [JSX.Element | null, Function] => {\n  const account = useAppSelector<string | undefined>(\n    (state) => state.user.account\n  );\n  const [orders, setOrders] = useState<LimitOrder[]>([]);\n  const [weth, setWeth] = useState<Token>();\n  const [search, setSearch] = useState('');\n  const dispatch = useDispatch();\n  const tokens = useAppSelector<Token[]>((state) => state.bancor.tokens);\n\n  const refreshOrders = useCallback(async () => {\n    if (account) setOrders(await getOrders(account));\n  }, [account]);\n\n  useEffect(() => {\n    const weth = tokens.find((x) => x.address === wethToken);\n    if (weth) setWeth(weth);\n  }, [tokens]);\n\n  useInterval(() => {\n    refreshOrders();\n  }, 60000);\n\n  useEffect(() => {\n    refreshOrders();\n  }, [refreshOrders]);\n\n  const defaultSort: SortingRule<LimitOrder> = { id: 'expiration', desc: true };\n\n  const data = useMemo<LimitOrder[]>(() => {\n    return orders.filter(\n      (t) =>\n        t.getToken.symbol.toLowerCase().includes(search.toLowerCase()) ||\n        t.payToken.symbol.toLowerCase().includes(search.toLowerCase())\n    );\n  }, [orders, search]);\n\n  const handleWithdrawWeth = useCallback(async () => {\n    weth &&\n      weth.balance &&\n      dispatch(addNotification(await withdrawWeth(weth.balance)));\n  }, [dispatch, weth]);\n\n  const handleCancelOrders = useCallback(async () => {\n    dispatch(\n      addNotification(await cancelOrders(orders.map((x) => x.orderRes)))\n    );\n  }, [dispatch, orders]);\n\n  const columns = useMemo<TableColumn<LimitOrder>[]>(\n    () => [\n      {\n        id: 'expiration',\n        Header: 'Expiration',\n        accessor: 'expiration',\n        Cell: (expiration) => (\n          <>\n            <span className=\"text-primary mr-12\">\n              {dayjs.unix(expiration.value).format('DD/MM/YYYY')}\n            </span>\n            <span>{dayjs.unix(expiration.value).format('h:mm:ss A')}</span>\n          </>\n        ),\n        minWidth: 240,\n        sortDescFirst: true,\n      },\n      {\n        id: 'payAmount',\n        Header: 'You pay',\n        accessor: 'payAmount',\n        Cell: (payAmount) => {\n          const payToken = payAmount.row.original.payToken;\n          return (\n            <div className={'flex items-center'}>\n              <Image\n                src={payToken.logoURI}\n                alt=\"Token\"\n                className=\"bg-grey-2 rounded-full h-28 w-28 mr-5\"\n              />\n              {`${payToken.symbol} ${payAmount.value}`}\n            </div>\n          );\n        },\n        minWidth: 200,\n        sortDescFirst: true,\n      },\n      {\n        id: 'getAmount',\n        Header: 'You get',\n        accessor: 'getAmount',\n        Cell: (getAmount) => {\n          const getToken = getAmount.row.original.getToken;\n          return (\n            <div className={'flex items-center'}>\n              <Image\n                src={getToken.logoURI}\n                alt=\"Token\"\n                className=\"bg-grey-2 rounded-full h-28 w-28 mr-5\"\n              />\n              {`${getToken.symbol} ${getAmount.value}`}\n            </div>\n          );\n        },\n        minWidth: 200,\n        sortDescFirst: true,\n      },\n      {\n        id: 'rate',\n        Header: 'Rate',\n        accessor: 'rate',\n        Cell: (rate) => rate.value,\n        minWidth: 200,\n        sortDescFirst: true,\n      },\n      {\n        id: 'filled',\n        Header: 'Filled',\n        accessor: 'filled',\n        Cell: (filled) => prettifyNumber(filled.value ?? 0) + '%',\n        minWidth: 70,\n        sortDescFirst: true,\n      },\n      {\n        id: 'actions',\n        Header: '',\n        accessor: 'hash',\n        Cell: (cellData) => {\n          return (\n            <button\n              className={'hover:text-error py-5 pl-5 transition duration-200'}\n              onClick={async () =>\n                dispatch(\n                  addNotification(\n                    await cancelOrders([cellData.row.original.orderRes])\n                  )\n                )\n              }\n            >\n              <IconTimes className={'w-10'} />\n            </button>\n          );\n        },\n        width: 50,\n        minWidth: 50,\n        disableSortBy: true,\n      },\n    ],\n    [dispatch]\n  );\n\n  if (!account || orders.length === 0) return [null, refreshOrders];\n\n  return [\n    <section className=\"content-section pt-20 pb-10 mt-20\">\n      <div className=\"flex justify-between items-center mb-20 mx-[20px] md:mx-[44px]\">\n        <h2>Active Orders</h2>\n        <div className=\"flex items-center gap-10\">\n          <SearchInput\n            value={search}\n            setValue={setSearch}\n            className=\"max-w-[160px] rounded-10 h-[35px]\"\n          />\n          <button\n            className={'btn-outline-secondary btn-sm rounded-10'}\n            onClick={() => handleCancelOrders()}\n          >\n            Cancel All\n          </button>\n          {weth && weth.balance && (\n            <button\n              className={'btn-outline-secondary btn-sm rounded-10'}\n              onClick={() => handleWithdrawWeth()}\n            >\n              Withdraw {prettifyNumber(weth.balance)} WETH\n            </button>\n          )}\n        </div>\n      </div>\n\n      <DataTable<LimitOrder>\n        data={data}\n        columns={columns}\n        defaultSort={defaultSort}\n        isLoading={!tokens.length}\n        stickyColumn\n        search={search}\n      />\n    </section>,\n    refreshOrders,\n  ];\n};\n"]},"metadata":{},"sourceType":"module"}