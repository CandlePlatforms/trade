{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Desktop/webapp-v2-feature-gtm_events/src/pages/Vote.tsx\",\n    _s = $RefreshSig$();\n\nimport { useWeb3React } from '@web3-react/core';\nimport { ReactComponent as IconLink } from \"@svgr/webpack?-svgo,+titleProp,+ref!assets/icons/link.svg\";\nimport { CountdownTimer } from 'components/countdownTimer/CountdownTimer';\nimport { ModalVbnt } from 'elements/modalVbnt/ModalVbnt';\nimport { useCallback, useState } from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from 'redux/index';\nimport { openWalletModal } from 'redux/user/user';\nimport { getNetworkVariables } from 'services/web3/config';\nimport { getStakedAmount, getUnstakeTimer } from 'services/web3/governance/governance';\nimport { EthNetworks } from 'services/web3/types';\nimport { prettifyNumber } from 'utils/helperFunctions';\nimport { openNewTab } from 'utils/pureFunctions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst VoteCard = _ref => {\n  let {\n    title,\n    step,\n    content,\n    button,\n    onClick,\n    footer\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col bg-white dark:bg-blue-4 max-w-[535px] min-h-[325px] px-30 pt-30 pb-[22px] shadow hover:shadow-lg dark:shadow-none rounded-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex text-20 font-semibold mb-18\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-primary dark:text-primary-light mr-12\",\n        children: `Step ${step}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-14 text-grey-4 dark:text-grey-0 mb-auto\",\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn-primary rounded w-[220px] h-[37px] mt-20 text-14\",\n      onClick: () => onClick(),\n      children: button\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"widget-separator mb-15 mt-50\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-[48px]\",\n      children: footer\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 5\n  }, this);\n};\n\n_c = VoteCard;\nexport const Vote = () => {\n  _s();\n\n  const {\n    chainId\n  } = useWeb3React();\n  const account = useAppSelector(state => state.user.account);\n  const tokens = useAppSelector(state => state.bancor.tokens);\n  const [govToken, setGovToken] = useState();\n  const [stakeAmount, setStakeAmount] = useState();\n  const [unstakeTime, setUnstakeTime] = useState();\n  const [isUnlocked, setIsUnlocked] = useState(false);\n  const [stakeModal, setStakeModal] = useState(false);\n  const [isStake, setIsStake] = useState(false);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const networkVars = getNetworkVariables(chainId ? chainId : EthNetworks.Mainnet);\n    setGovToken(tokens.find(x => x.address === networkVars.govToken));\n  }, [tokens, chainId]);\n  const refresh = useCallback(async () => {\n    if (account && govToken) {\n      const [unstakeTimer, stakedAmount] = await Promise.all([getUnstakeTimer(account), getStakedAmount(account, govToken)]);\n      setUnstakeTime(unstakeTimer);\n      setStakeAmount(stakedAmount);\n    } else {\n      setUnstakeTime(undefined);\n      setStakeAmount(undefined);\n    }\n  }, [account, govToken]);\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col text-14 max-w-[1140px] md:mx-auto mx-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"font-bold text-3xl text-blue-4 dark:text-grey-0 mb-18\",\n      children: \"Vote\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-blue-4 dark:text-grey-0 mb-44\",\n      children: \"Bancor is a DAO managed by vBNT stakers who determine the future of the protocol with their proposals.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-y-50 gap-x-50\",\n      children: [/*#__PURE__*/_jsxDEV(VoteCard, {\n        step: 1,\n        title: \"Stake your vBNT\",\n        content: \"In order to participate in Bancor governance activities, you should first stake your vBNT tokens.\",\n        button: \"Stake Tokens\",\n        onClick: () => {\n          if (!account) {\n            dispatch(openWalletModal(true));\n            return;\n          }\n\n          setIsStake(true);\n          setStakeModal(true);\n        },\n        footer: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 text-grey-4 dark:text-grey-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [!account || govToken && govToken.balance ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-blue-4 font-semibold text-20 dark:text-grey-0 mb-4\",\n              children: govToken && govToken.balance ? `${prettifyNumber(govToken.balance)} ${govToken.symbol}` : '--'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-skeleton h-[24px] w-[140px] mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 19\n            }, this), \"Unstaked Balance\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [!account || stakeAmount ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-blue-4 font-semibold text-20 dark:text-grey-0 mb-4\",\n              children: stakeAmount && govToken ? `${prettifyNumber(stakeAmount)} ${govToken.symbol}` : '--'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-skeleton h-[24px] w-[140px] mb-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 19\n            }, this), \"Staked Balance\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VoteCard, {\n        step: 2,\n        title: \"Make a Difference\",\n        content: \"Voting on Bancor DAO is free as it is using the Snapshot off-chain infrastructure. Every user can vote on every available proposal and help shape the future of the Bancor Protocol.\",\n        button: \"Vote on Snapshot\",\n        onClick: () => {\n          openNewTab('https://vote.bancor.network/');\n        },\n        footer: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-end h-[48px]\",\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://blog.bancor.network/gasless-voting-is-live-on-bancor-governance-82d232da16b9\",\n            target: \"_blank\",\n            className: \"flex items-center text-primary dark:text-primary-light font-medium\",\n            rel: \"noreferrer\",\n            children: [\"How to Vote \", /*#__PURE__*/_jsxDEV(IconLink, {\n              className: \"w-14 ml-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row md:col-span-2 md:items-center bg-white dark:bg-blue-4 shadow hover:shadow-lg dark:shadow-none rounded-20 mb-20\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col max-w-[520px] min-h-[170px] p-24\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-16 text-blue-4 dark:text-grey-0 mb-18 font-medium\",\n            children: \"Unstake from Governance\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-12 text-grey-4 dark:text-grey-0 mb-auto\",\n            children: \"In order to remove vBNT from governance you would need to unstake them first.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:flex items-center w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `text-12 font-medium btn-sm rounded-10 w-full mt-20 md:mt-0 md:max-w-[190px]  ${(!!unstakeTime || !stakeAmount || Number(stakeAmount) === 0) && !isUnlocked ? 'btn-outline-secondary text-grey-3 dark:bg-blue-3 dark:text-grey-3 dark:border-grey-3' : 'btn-outline-primary border border-primary hover:border-primary-dark hover:bg-white hover:text-primary-dark dark:border-primary-light dark:hover:border-primary-light dark:hover:bg-blue-3 dark:hover:text-primary-light'}`,\n              disabled: (!!unstakeTime || !stakeAmount || Number(stakeAmount) === 0) && !isUnlocked,\n              onClick: () => {\n                setIsStake(false);\n                setStakeModal(true);\n              },\n              children: \"Unstake Tokens\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 15\n            }, this), unstakeTime && !isUnlocked && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex text-12 text-grey-3 md:ml-10 justify-center md:justify-start mt-10 md:mt-0 md:text-left w-full\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-4\",\n                children: \"Unstake available in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(CountdownTimer, {\n                date: unstakeTime,\n                onEnded: () => setIsUnlocked(true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"widget-separator md:transform md:rotate-90 md:w-[120px] my-0 ml-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col max-w-[525px] min-h-[170px] py-24 pl-24 md:pl-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-16 text-blue-4 dark:text-grey-0 mb-18 font-medium\",\n            children: \"Legacy onchain contract\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-12 text-grey-4 dark:text-grey-0 mb-auto\",\n            children: \"View previous votes and decisions made onchain.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"https://etherscan.io/address/0x892f481bd6e9d7d26ae365211d9b45175d5d00e4\",\n            target: \"_blank\",\n            className: \"flex items-center text-primary dark:text-primary-light font-medium\",\n            rel: \"noreferrer\",\n            children: [\"View Legacy Gov \", /*#__PURE__*/_jsxDEV(IconLink, {\n              className: \"w-14 ml-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), govToken && /*#__PURE__*/_jsxDEV(ModalVbnt, {\n      isOpen: stakeModal,\n      setIsOpen: setStakeModal,\n      token: govToken,\n      stake: isStake,\n      stakeBalance: stakeAmount,\n      onCompleted: refresh\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Vote, \"ej4jcY+ZfN2SBh1qpWIS6TebRNc=\", false, function () {\n  return [useWeb3React, useAppSelector, useAppSelector, useDispatch];\n});\n\n_c2 = Vote;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"VoteCard\");\n$RefreshReg$(_c2, \"Vote\");","map":{"version":3,"sources":["/Users/safahi/Desktop/webapp-v2-feature-gtm_events/src/pages/Vote.tsx"],"names":["useWeb3React","CountdownTimer","ModalVbnt","useCallback","useState","useEffect","useDispatch","useAppSelector","openWalletModal","getNetworkVariables","getStakedAmount","getUnstakeTimer","EthNetworks","prettifyNumber","openNewTab","VoteCard","title","step","content","button","onClick","footer","Vote","chainId","account","state","user","tokens","bancor","govToken","setGovToken","stakeAmount","setStakeAmount","unstakeTime","setUnstakeTime","isUnlocked","setIsUnlocked","stakeModal","setStakeModal","isStake","setIsStake","dispatch","networkVars","Mainnet","find","x","address","refresh","unstakeTimer","stakedAmount","Promise","all","undefined","balance","symbol","Number"],"mappings":";;;AAAA,SAASA,YAAT,QAA6B,kBAA7B;;AAEA,SAASC,cAAT,QAA+B,0CAA/B;AACA,SAASC,SAAT,QAA0B,8BAA1B;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,OAAtC;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,cAAT,QAA+B,aAA/B;AACA,SAASC,eAAT,QAAgC,iBAAhC;AAEA,SAASC,mBAAT,QAAoC,sBAApC;AACA,SACEC,eADF,EAEEC,eAFF,QAGO,qCAHP;AAIA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,UAAT,QAA2B,qBAA3B;;;AAUA,MAAMC,QAAQ,GAAG,QAOI;AAAA,MAPH;AAChBC,IAAAA,KADgB;AAEhBC,IAAAA,IAFgB;AAGhBC,IAAAA,OAHgB;AAIhBC,IAAAA,MAJgB;AAKhBC,IAAAA,OALgB;AAMhBC,IAAAA;AANgB,GAOG;AACnB,sBACE;AAAK,IAAA,SAAS,EAAC,4IAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,kCAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,4CAAf;AAAA,kBAA8D,QAAOJ,IAAK;AAA1E;AAAA;AAAA;AAAA;AAAA,cADF,EAEGD,KAFH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAKE;AAAK,MAAA,SAAS,EAAC,8CAAf;AAAA,gBACGE;AADH;AAAA;AAAA;AAAA;AAAA,YALF,eAQE;AACE,MAAA,SAAS,EAAC,sDADZ;AAEE,MAAA,OAAO,EAAE,MAAME,OAAO,EAFxB;AAAA,gBAIGD;AAJH;AAAA;AAAA;AAAA;AAAA,YARF,eAcE;AAAI,MAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,YAdF,eAeE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,gBAA+BE;AAA/B;AAAA;AAAA;AAAA;AAAA,YAfF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmBD,CA3BD;;KAAMN,Q;AA6BN,OAAO,MAAMO,IAAI,GAAG,MAAM;AAAA;;AACxB,QAAM;AAAEC,IAAAA;AAAF,MAAcvB,YAAY,EAAhC;AACA,QAAMwB,OAAO,GAAGjB,cAAc,CAC3BkB,KAAD,IAAWA,KAAK,CAACC,IAAN,CAAWF,OADM,CAA9B;AAGA,QAAMG,MAAM,GAAGpB,cAAc,CAAWkB,KAAD,IAAWA,KAAK,CAACG,MAAN,CAAaD,MAAlC,CAA7B;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0B1B,QAAQ,EAAxC;AACA,QAAM,CAAC2B,WAAD,EAAcC,cAAd,IAAgC5B,QAAQ,EAA9C;AACA,QAAM,CAAC6B,WAAD,EAAcC,cAAd,IAAgC9B,QAAQ,EAA9C;AACA,QAAM,CAAC+B,UAAD,EAAaC,aAAb,IAA8BhC,QAAQ,CAAU,KAAV,CAA5C;AACA,QAAM,CAACiC,UAAD,EAAaC,aAAb,IAA8BlC,QAAQ,CAAU,KAAV,CAA5C;AACA,QAAM,CAACmC,OAAD,EAAUC,UAAV,IAAwBpC,QAAQ,CAAU,KAAV,CAAtC;AACA,QAAMqC,QAAQ,GAAGnC,WAAW,EAA5B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMqC,WAAW,GAAGjC,mBAAmB,CACrCc,OAAO,GAAGA,OAAH,GAAaX,WAAW,CAAC+B,OADK,CAAvC;AAGAb,IAAAA,WAAW,CAACH,MAAM,CAACiB,IAAP,CAAaC,CAAD,IAAOA,CAAC,CAACC,OAAF,KAAcJ,WAAW,CAACb,QAA7C,CAAD,CAAX;AACD,GALQ,EAKN,CAACF,MAAD,EAASJ,OAAT,CALM,CAAT;AAOA,QAAMwB,OAAO,GAAG5C,WAAW,CAAC,YAAY;AACtC,QAAIqB,OAAO,IAAIK,QAAf,EAAyB;AACvB,YAAM,CAACmB,YAAD,EAAeC,YAAf,IAA+B,MAAMC,OAAO,CAACC,GAAR,CAAY,CACrDxC,eAAe,CAACa,OAAD,CADsC,EAErDd,eAAe,CAACc,OAAD,EAAUK,QAAV,CAFsC,CAAZ,CAA3C;AAIAK,MAAAA,cAAc,CAACc,YAAD,CAAd;AACAhB,MAAAA,cAAc,CAACiB,YAAD,CAAd;AACD,KAPD,MAOO;AACLf,MAAAA,cAAc,CAACkB,SAAD,CAAd;AACApB,MAAAA,cAAc,CAACoB,SAAD,CAAd;AACD;AACF,GAZ0B,EAYxB,CAAC5B,OAAD,EAAUK,QAAV,CAZwB,CAA3B;AAcAxB,EAAAA,SAAS,CAAC,MAAM;AACd0C,IAAAA,OAAO;AACR,GAFQ,EAEN,CAACA,OAAD,CAFM,CAAT;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,uDAAf;AAAA,4BACE;AAAK,MAAA,SAAS,EAAC,uDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAK,MAAA,SAAS,EAAC,oCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,eASE;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA,8BACE,QAAC,QAAD;AACE,QAAA,IAAI,EAAE,CADR;AAEE,QAAA,KAAK,EAAC,iBAFR;AAGE,QAAA,OAAO,EAAC,mGAHV;AAIE,QAAA,MAAM,EAAC,cAJT;AAKE,QAAA,OAAO,EAAE,MAAM;AACb,cAAI,CAACvB,OAAL,EAAc;AACZiB,YAAAA,QAAQ,CAACjC,eAAe,CAAC,IAAD,CAAhB,CAAR;AACA;AACD;;AAEDgC,UAAAA,UAAU,CAAC,IAAD,CAAV;AACAF,UAAAA,aAAa,CAAC,IAAD,CAAb;AACD,SAbH;AAcE,QAAA,MAAM,eACJ;AAAK,UAAA,SAAS,EAAC,+CAAf;AAAA,kCACE;AAAA,uBACG,CAACd,OAAD,IAAaK,QAAQ,IAAIA,QAAQ,CAACwB,OAAlC,gBACC;AAAK,cAAA,SAAS,EAAC,yDAAf;AAAA,wBACGxB,QAAQ,IAAIA,QAAQ,CAACwB,OAArB,GACI,GAAExC,cAAc,CAACgB,QAAQ,CAACwB,OAAV,CAAmB,IAAGxB,QAAQ,CAACyB,MAAO,EAD1D,GAEG;AAHN;AAAA;AAAA;AAAA;AAAA,oBADD,gBAOC;AAAK,cAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,oBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAaE;AAAA,uBACG,CAAC9B,OAAD,IAAYO,WAAZ,gBACC;AAAK,cAAA,SAAS,EAAC,yDAAf;AAAA,wBACGA,WAAW,IAAIF,QAAf,GACI,GAAEhB,cAAc,CAACkB,WAAD,CAAc,IAAGF,QAAQ,CAACyB,MAAO,EADrD,GAEG;AAHN;AAAA;AAAA;AAAA;AAAA,oBADD,gBAOC;AAAK,cAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,oBARJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AAfJ;AAAA;AAAA;AAAA;AAAA,cADF,eA4CE,QAAC,QAAD;AACE,QAAA,IAAI,EAAE,CADR;AAEE,QAAA,KAAK,EAAC,mBAFR;AAGE,QAAA,OAAO,EAAC,sLAHV;AAIE,QAAA,MAAM,EAAC,kBAJT;AAKE,QAAA,OAAO,EAAE,MAAM;AACbxC,UAAAA,UAAU,CAAC,8BAAD,CAAV;AACD,SAPH;AAQE,QAAA,MAAM,eACJ;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,iCACE;AACE,YAAA,IAAI,EAAC,sFADP;AAEE,YAAA,MAAM,EAAC,QAFT;AAGE,YAAA,SAAS,EAAC,oEAHZ;AAIE,YAAA,GAAG,EAAC,YAJN;AAAA,oDAMc,QAAC,QAAD;AAAU,cAAA,SAAS,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,oBANd;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AATJ;AAAA;AAAA;AAAA;AAAA,cA5CF,eAkEE;AAAK,QAAA,SAAS,EAAC,0IAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,gDAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,wDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAK,YAAA,SAAS,EAAC,8CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,eASE;AAAK,YAAA,SAAS,EAAC,6BAAf;AAAA,oCACE;AACE,cAAA,SAAS,EAAG,gFACV,CAAC,CAAC,CAACmB,WAAF,IACC,CAACF,WADF,IAECwB,MAAM,CAACxB,WAAD,CAAN,KAAwB,CAF1B,KAGA,CAACI,UAHD,GAII,sFAJJ,GAKI,yNACL,EARH;AASE,cAAA,QAAQ,EACN,CAAC,CAAC,CAACF,WAAF,IACC,CAACF,WADF,IAECwB,MAAM,CAACxB,WAAD,CAAN,KAAwB,CAF1B,KAGA,CAACI,UAbL;AAeE,cAAA,OAAO,EAAE,MAAM;AACbK,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,gBAAAA,aAAa,CAAC,IAAD,CAAb;AACD,eAlBH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,EAuBGL,WAAW,IAAI,CAACE,UAAhB,iBACC;AAAK,cAAA,SAAS,EAAC,qGAAf;AAAA,sCACE;AAAM,gBAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,QAAC,cAAD;AACE,gBAAA,IAAI,EAAEF,WADR;AAEE,gBAAA,OAAO,EAAE,MAAMG,aAAa,CAAC,IAAD;AAF9B;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAxBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eA4CE;AAAI,UAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,gBA5CF,eA6CE;AAAK,UAAA,SAAS,EAAC,+DAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,wDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAKE;AAAK,YAAA,SAAS,EAAC,8CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,eASE;AACE,YAAA,IAAI,EAAC,yEADP;AAEE,YAAA,MAAM,EAAC,QAFT;AAGE,YAAA,SAAS,EAAC,oEAHZ;AAIE,YAAA,GAAG,EAAC,YAJN;AAAA,wDAMkB,QAAC,QAAD;AAAU,cAAA,SAAS,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,oBANlB;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7CF;AAAA;AAAA;AAAA;AAAA;AAAA,cAlEF;AAAA;AAAA;AAAA;AAAA;AAAA,YATF,EA4IGP,QAAQ,iBACP,QAAC,SAAD;AACE,MAAA,MAAM,EAAEQ,UADV;AAEE,MAAA,SAAS,EAAEC,aAFb;AAGE,MAAA,KAAK,EAAET,QAHT;AAIE,MAAA,KAAK,EAAEU,OAJT;AAKE,MAAA,YAAY,EAAER,WALhB;AAME,MAAA,WAAW,EAAEgB;AANf;AAAA;AAAA;AAAA;AAAA,YA7IJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAyJD,CAhMM;;GAAMzB,I;UACStB,Y,EACJO,c,EAGDA,c,EAOED,W;;;MAZNgB,I","sourcesContent":["import { useWeb3React } from '@web3-react/core';\nimport { ReactComponent as IconLink } from 'assets/icons/link.svg';\nimport { CountdownTimer } from 'components/countdownTimer/CountdownTimer';\nimport { ModalVbnt } from 'elements/modalVbnt/ModalVbnt';\nimport { useCallback, useState } from 'react';\nimport { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from 'redux/index';\nimport { openWalletModal } from 'redux/user/user';\nimport { Token } from 'services/observables/tokens';\nimport { getNetworkVariables } from 'services/web3/config';\nimport {\n  getStakedAmount,\n  getUnstakeTimer,\n} from 'services/web3/governance/governance';\nimport { EthNetworks } from 'services/web3/types';\nimport { prettifyNumber } from 'utils/helperFunctions';\nimport { openNewTab } from 'utils/pureFunctions';\n\ninterface VoteCardProps {\n  title: string;\n  step: number;\n  content: string;\n  button: string;\n  onClick: Function;\n  footer: JSX.Element;\n}\nconst VoteCard = ({\n  title,\n  step,\n  content,\n  button,\n  onClick,\n  footer,\n}: VoteCardProps) => {\n  return (\n    <div className=\"flex flex-col bg-white dark:bg-blue-4 max-w-[535px] min-h-[325px] px-30 pt-30 pb-[22px] shadow hover:shadow-lg dark:shadow-none rounded-20\">\n      <div className=\"flex text-20 font-semibold mb-18\">\n        <div className=\"text-primary dark:text-primary-light mr-12\">{`Step ${step}`}</div>\n        {title}\n      </div>\n      <div className=\"text-14 text-grey-4 dark:text-grey-0 mb-auto\">\n        {content}\n      </div>\n      <button\n        className=\"btn-primary rounded w-[220px] h-[37px] mt-20 text-14\"\n        onClick={() => onClick()}\n      >\n        {button}\n      </button>\n      <hr className=\"widget-separator mb-15 mt-50\" />\n      <div className=\"min-h-[48px]\">{footer}</div>\n    </div>\n  );\n};\n\nexport const Vote = () => {\n  const { chainId } = useWeb3React();\n  const account = useAppSelector<string | undefined>(\n    (state) => state.user.account\n  );\n  const tokens = useAppSelector<Token[]>((state) => state.bancor.tokens);\n  const [govToken, setGovToken] = useState<Token | undefined>();\n  const [stakeAmount, setStakeAmount] = useState<string | undefined>();\n  const [unstakeTime, setUnstakeTime] = useState<number | undefined>();\n  const [isUnlocked, setIsUnlocked] = useState<boolean>(false);\n  const [stakeModal, setStakeModal] = useState<boolean>(false);\n  const [isStake, setIsStake] = useState<boolean>(false);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const networkVars = getNetworkVariables(\n      chainId ? chainId : EthNetworks.Mainnet\n    );\n    setGovToken(tokens.find((x) => x.address === networkVars.govToken));\n  }, [tokens, chainId]);\n\n  const refresh = useCallback(async () => {\n    if (account && govToken) {\n      const [unstakeTimer, stakedAmount] = await Promise.all([\n        getUnstakeTimer(account),\n        getStakedAmount(account, govToken),\n      ]);\n      setUnstakeTime(unstakeTimer);\n      setStakeAmount(stakedAmount);\n    } else {\n      setUnstakeTime(undefined);\n      setStakeAmount(undefined);\n    }\n  }, [account, govToken]);\n\n  useEffect(() => {\n    refresh();\n  }, [refresh]);\n\n  return (\n    <div className=\"flex flex-col text-14 max-w-[1140px] md:mx-auto mx-20\">\n      <div className=\"font-bold text-3xl text-blue-4 dark:text-grey-0 mb-18\">\n        Vote\n      </div>\n      <div className=\"text-blue-4 dark:text-grey-0 mb-44\">\n        Bancor is a DAO managed by vBNT stakers who determine the future of the\n        protocol with their proposals.\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-y-50 gap-x-50\">\n        <VoteCard\n          step={1}\n          title=\"Stake your vBNT\"\n          content=\"In order to participate in Bancor governance activities, you should first stake your vBNT tokens.\"\n          button=\"Stake Tokens\"\n          onClick={() => {\n            if (!account) {\n              dispatch(openWalletModal(true));\n              return;\n            }\n\n            setIsStake(true);\n            setStakeModal(true);\n          }}\n          footer={\n            <div className=\"grid grid-cols-2 text-grey-4 dark:text-grey-0\">\n              <div>\n                {!account || (govToken && govToken.balance) ? (\n                  <div className=\"text-blue-4 font-semibold text-20 dark:text-grey-0 mb-4\">\n                    {govToken && govToken.balance\n                      ? `${prettifyNumber(govToken.balance)} ${govToken.symbol}`\n                      : '--'}\n                  </div>\n                ) : (\n                  <div className=\"loading-skeleton h-[24px] w-[140px] mb-4\" />\n                )}\n                Unstaked Balance\n              </div>\n              <div>\n                {!account || stakeAmount ? (\n                  <div className=\"text-blue-4 font-semibold text-20 dark:text-grey-0 mb-4\">\n                    {stakeAmount && govToken\n                      ? `${prettifyNumber(stakeAmount)} ${govToken.symbol}`\n                      : '--'}\n                  </div>\n                ) : (\n                  <div className=\"loading-skeleton h-[24px] w-[140px] mb-4\" />\n                )}\n                Staked Balance\n              </div>\n            </div>\n          }\n        />\n        <VoteCard\n          step={2}\n          title=\"Make a Difference\"\n          content=\"Voting on Bancor DAO is free as it is using the Snapshot off-chain infrastructure. Every user can vote on every available proposal and help shape the future of the Bancor Protocol.\"\n          button=\"Vote on Snapshot\"\n          onClick={() => {\n            openNewTab('https://vote.bancor.network/');\n          }}\n          footer={\n            <div className=\"flex items-end h-[48px]\">\n              <a\n                href=\"https://blog.bancor.network/gasless-voting-is-live-on-bancor-governance-82d232da16b9\"\n                target=\"_blank\"\n                className=\"flex items-center text-primary dark:text-primary-light font-medium\"\n                rel=\"noreferrer\"\n              >\n                How to Vote <IconLink className=\"w-14 ml-6\" />\n              </a>\n            </div>\n          }\n        />\n\n        <div className=\"flex flex-col md:flex-row md:col-span-2 md:items-center bg-white dark:bg-blue-4 shadow hover:shadow-lg dark:shadow-none rounded-20 mb-20\">\n          <div className=\"flex flex-col max-w-[520px] min-h-[170px] p-24\">\n            <div className=\"text-16 text-blue-4 dark:text-grey-0 mb-18 font-medium\">\n              Unstake from Governance\n            </div>\n\n            <div className=\"text-12 text-grey-4 dark:text-grey-0 mb-auto\">\n              In order to remove vBNT from governance you would need to unstake\n              them first.\n            </div>\n            <div className=\"md:flex items-center w-full\">\n              <button\n                className={`text-12 font-medium btn-sm rounded-10 w-full mt-20 md:mt-0 md:max-w-[190px]  ${\n                  (!!unstakeTime ||\n                    !stakeAmount ||\n                    Number(stakeAmount) === 0) &&\n                  !isUnlocked\n                    ? 'btn-outline-secondary text-grey-3 dark:bg-blue-3 dark:text-grey-3 dark:border-grey-3'\n                    : 'btn-outline-primary border border-primary hover:border-primary-dark hover:bg-white hover:text-primary-dark dark:border-primary-light dark:hover:border-primary-light dark:hover:bg-blue-3 dark:hover:text-primary-light'\n                }`}\n                disabled={\n                  (!!unstakeTime ||\n                    !stakeAmount ||\n                    Number(stakeAmount) === 0) &&\n                  !isUnlocked\n                }\n                onClick={() => {\n                  setIsStake(false);\n                  setStakeModal(true);\n                }}\n              >\n                Unstake Tokens\n              </button>\n              {unstakeTime && !isUnlocked && (\n                <div className=\"flex text-12 text-grey-3 md:ml-10 justify-center md:justify-start mt-10 md:mt-0 md:text-left w-full\">\n                  <span className=\"mr-4\">Unstake available in</span>\n                  <CountdownTimer\n                    date={unstakeTime}\n                    onEnded={() => setIsUnlocked(true)}\n                  />\n                </div>\n              )}\n            </div>\n          </div>\n          <hr className=\"widget-separator md:transform md:rotate-90 md:w-[120px] my-0 ml-2\" />\n          <div className=\"flex flex-col max-w-[525px] min-h-[170px] py-24 pl-24 md:pl-8\">\n            <div className=\"text-16 text-blue-4 dark:text-grey-0 mb-18 font-medium\">\n              Legacy onchain contract\n            </div>\n\n            <div className=\"text-12 text-grey-4 dark:text-grey-0 mb-auto\">\n              View previous votes and decisions made onchain.\n            </div>\n\n            <a\n              href=\"https://etherscan.io/address/0x892f481bd6e9d7d26ae365211d9b45175d5d00e4\"\n              target=\"_blank\"\n              className=\"flex items-center text-primary dark:text-primary-light font-medium\"\n              rel=\"noreferrer\"\n            >\n              View Legacy Gov <IconLink className=\"w-14 ml-6\" />\n            </a>\n          </div>\n        </div>\n      </div>\n      {govToken && (\n        <ModalVbnt\n          isOpen={stakeModal}\n          setIsOpen={setStakeModal}\n          token={govToken}\n          stake={isStake}\n          stakeBalance={stakeAmount}\n          onCompleted={refresh}\n        />\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}